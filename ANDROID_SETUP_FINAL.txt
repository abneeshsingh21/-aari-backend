# AARI Android Setup - Complete Instructions

## ğŸ¯ What You'll Have After Setup

âœ… **Android App** - Installed on your phone  
âœ… **Background Mode** - Auto-starts with device  
âœ… **Wake Word Detection** - Say "Hey AARI" anytime  
âœ… **Offline Support** - Works without PC (limited features)  
âœ… **Cloud Sync** - Syncs with backend every 5 minutes  
âœ… **24/7 Available** - When using cloud backend  

---

## ğŸ“‹ STEP 1: Prepare Backend (On Your PC)

### 1A: Install Python Dependencies
```powershell
cd "c:\Users\lenovo\Desktop\aari\VoiceAssistant"
.\COMPLETE_SETUP.bat
```

### 1B: Create .env File
Create file: `backend/.env`
```
GOOGLE_API_KEY=your_key_from_makersuite.google.com
SENDER_EMAIL=your_gmail@gmail.com
SENDER_PASSWORD=your_gmail_app_password
```

**How to get these:**
- **Google API Key:** https://makersuite.google.com/app/apikey
- **Gmail App Password:** 
  1. Enable 2FA: https://myaccount.google.com/security
  2. Get app password: https://myaccount.google.com/apppasswords
  3. Select "Mail" and "Windows"

### 1C: Get Your PC's IP Address
```powershell
ipconfig
```
Look for "IPv4 Address" (like `192.168.1.100`)

**Write it down:** `192.168.____.__`

---

## ğŸ”§ STEP 2: Build Android APK

### 2A: Open in Android Studio
1. Download Android Studio: https://developer.android.com/studio
2. Open `android` folder
3. Wait for Gradle sync (5-10 min)

### 2B: Update Backend IP
**File:** `android/src/main/java/com/voiceassistant/app/ApiClient.java`

Find (around line 20):
```java
private static final String BASE_URL = "http://192.168.1.100:5000";
```

Replace `192.168.1.100` with YOUR PC's IP from Step 1C:
```java
private static final String BASE_URL = "http://192.168.1.120:5000";  // Example
```

### 2C: Build APK
In Android Studio:
- Click **Build** â†’ **Build APK(s)**
- Wait for completion
- Click "Locate" to find the APK file

---

## ğŸ“± STEP 3: Install on Android Phone

### 3A: Connect Phone via USB
1. Enable USB Debugging on phone:
   - Settings â†’ About Phone â†’ Tap "Build Number" 7 times
   - Settings â†’ Developer Options â†’ USB Debugging â†’ ON
2. Connect phone to PC with USB cable
3. Allow "Allow USB debugging" on phone

### 3B: Install from Android Studio
1. In Android Studio, click **Run** (green play button)
2. Select your phone
3. Click OK
4. Wait for installation (2-5 minutes)

**Or manually install APK:**
1. Find APK file from Step 2C
2. Copy to phone
3. Open file manager â†’ Tap APK â†’ Install

### 3C: Launch AARI
1. On phone, find "AARI" app
2. Tap to open
3. Grant all permissions when asked:
   - âœ… Microphone
   - âœ… Phone
   - âœ… Contacts
   - âœ… SMS
   - âœ… Storage

---

## âš™ï¸ STEP 4: Configure Background Mode

### 4A: Enable in App Settings
1. Open AARI app
2. Tap **Settings** (âš™ï¸ icon)
3. Enable:
   - âœ… "Background Mode"
   - âœ… "Always Listening"
   - âœ… "Listen on Lock Screen"

### 4B: Disable Battery Optimization (CRITICAL!)
This allows AARI to run 24/7 in background.

**Android 11+:**
1. Settings â†’ Apps â†’ AARI â†’ Battery
2. Battery optimization â†’ Select "Don't optimize"

**Android 9-10:**
1. Settings â†’ Apps & Notifications â†’ Advanced
2. Special App Access â†’ Battery Optimization
3. Find AARI â†’ Select "Don't optimize"

**Android 6-8:**
1. Settings â†’ Battery â†’ Battery Optimization
2. Find AARI â†’ Select "Don't optimize"

---

## ğŸš€ STEP 5: Start Backend Server

### 5A: Keep Server Running
On your PC, run:
```powershell
cd "c:\Users\lenovo\Desktop\aari\VoiceAssistant"
.\START_BACKEND_ONLY.bat
```

**Keep this window open!** The backend must run continuously.

### 5B: Verify Backend is Running
```powershell
# In another PowerShell window
Invoke-WebRequest -Uri "http://192.168.1.100:5000/api/health"
# Should see: {"status":"healthy"}
```

---

## ğŸ¤ STEP 6: Test Voice Commands

### Test 1: Wake Word
1. Say: **"Hey AARI"**
2. Wait for response: "I'm awake. What can I do?"
3. If you hear this, everything works! âœ“

### Test 2: Simple Command
1. Say: **"Hey AARI, what time is it?"**
2. AARI should respond with current time

### Test 3: Background Mode
1. **Close AARI app** (don't just minimize)
2. Wait 30 seconds
3. Say: **"Hey AARI"** (from home screen)
4. AARI should respond from background!

### Test 4: Lock Screen
1. **Lock your phone**
2. Say: **"Hey AARI"**
3. Say: **"What's the weather?"**
4. AARI responds without unlocking!

---

## ğŸ’¡ Voice Commands You Can Use

### Quick Reference
```
"Hey AARI, send WhatsApp to John saying hello"
"Hey AARI, call Mom"
"Hey AARI, what time is it?"
"Hey AARI, what's the weather?"
"Hey AARI, play music"
"Hey AARI, open Chrome"
"Hey AARI, set reminder for 3pm"
"Hey AARI, search for Python tutorial"
```

See full list in: `ANDROID_COMPLETE_SETUP.md`

---

## ğŸ”„ Optional: Setup Cloud Backend (24/7)

If you want AARI to work even when your PC is off:

### Deploy Backend to Heroku (Free)
1. Create account: https://www.heroku.com
2. Follow: `CLOUD_DEPLOYMENT_SETUP.md`
3. Update Android app to use cloud URL
4. Works 24/7 without PC!

---

## âŒ Troubleshooting

### "Backend connection failed"
- [ ] Backend server running? (Check command window)
- [ ] Correct IP in ApiClient.java?
- [ ] Both PC and phone on same WiFi?
- [ ] Firewall blocking port 5000?

**Solution:**
```powershell
# Allow port 5000 in Windows Firewall
netsh advfirewall firewall add rule name="AARI" dir=in action=allow protocol=tcp localport=5000
```

### "Wake word not detected"
- [ ] Background Mode enabled?
- [ ] Battery optimization disabled?
- [ ] Microphone working? (Settings â†’ Sound â†’ Test)
- [ ] Screen not too dark (wake word detection reduces at very low light)

**Solution:**
1. Go to Settings (in AARI app)
2. Restart Background Mode
3. Say "Hey AARI" loudly and clearly

### "App crashes on startup"
- [ ] Clear app cache: Settings â†’ Apps â†’ AARI â†’ Storage â†’ Clear Cache
- [ ] Reinstall the app
- [ ] Check phone has 100MB+ free storage

### "No audio output"
- [ ] Volume not muted?
- [ ] Speakers not plugged in?
- [ ] Try restarting phone

---

## âœ… Final Verification Checklist

Before you're done, verify:

- [ ] Backend server running on PC
- [ ] APK installed on Android phone
- [ ] All permissions granted
- [ ] Background Mode enabled
- [ ] Battery optimization disabled
- [ ] "Hey AARI" wake word works
- [ ] Can execute at least 1 command
- [ ] Works with locked screen
- [ ] Works in background (app closed)

---

## ğŸ“Š After Setup: How It Works

### Flow Diagram
```
Your Voice
    â†“
"Hey AARI" â†’ Phone detects wake word
    â†“
VoiceAssistantService (background) â†’ Records command
    â†“
Send to Backend Server (192.168.x.x:5000)
    â†“
Backend processes & executes command
    â†“
Response sent back to phone
    â†“
Text-to-Speech â†’ You hear the response
```

### Auto-Sync (Every 5 Minutes)
```
Local Database â† â†’ Backend Server â† â†’ Cloud (optional)
- Messages
- Contacts  
- Conversation history
- Reminders
```

---

## ğŸ¯ What Happens When PC is Off?

**If you have cloud backend:**
- âœ… AARI still works! (Uses cloud)
- âœ… All features available
- âœ… Always available 24/7

**If you DON'T have cloud backend:**
- âŒ Can't access web search
- âŒ Can't send real messages (queued)
- âŒ Limited to local features only
- âœ… Can type commands instead

**Recommendation:** Set up cloud backend for full 24/7 access

---

## ğŸ” Privacy & Security

âœ… Voice data processed locally  
âœ… No data stored on external servers  
âœ… Contacts stored only on your phone  
âœ… Clear conversation history anytime  

**Clear history:**
- AARI App â†’ Settings â†’ Privacy â†’ Clear History

---

## ğŸ“ Support

**If something doesn't work:**
1. Check troubleshooting section above
2. Verify all steps completed
3. Check backend logs (command window)
4. Check Android Logcat in Android Studio

---

## ğŸ‰ You're Ready!

Your AARI Voice Assistant is now:
- âœ… Running on your Android device
- âœ… Auto-starting without manual opening
- âœ… Listening 24/7 for "Hey AARI"
- âœ… Syncing with backend automatically
- âœ… Works even with locked screen
- âœ… Works even in background

**Enjoy your intelligent voice assistant! ğŸš€**

---

**Last Updated:** November 14, 2025  
**Version:** Android Setup Complete
